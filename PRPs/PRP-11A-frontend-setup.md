# PRP-11A: ForecastLab Frontend Setup & Configuration

**Feature**: INITIAL-11A.md — Frontend Project Scaffolding
**Status**: Ready for Implementation
**Confidence Score**: 9.5/10

---

## Goal

Scaffold a complete Vite + React 19 + TypeScript frontend project with:
1. **Tailwind CSS 4** via `@tailwindcss/vite` plugin
2. **shadcn/ui** component library initialized with New York style
3. **All required shadcn components** pre-installed for dashboard features
4. **Environment configuration** for backend API integration
5. **TypeScript strict mode** with proper path aliases

This is a **setup-only PRP** — no application code, just project scaffolding and configuration files.

---

## Why

- **Developer Experience**: Frontend developers can immediately start building features
- **Consistency**: Pre-configured project ensures consistent patterns across the team
- **Portfolio Value**: Demonstrates modern React 19 + Tailwind CSS 4 setup
- **Dependency Management**: All shadcn/ui components installed upfront to avoid mid-development interruptions

---

## What

### Deliverables

| File/Directory | Purpose |
|----------------|---------|
| `frontend/` | Root directory for React project |
| `frontend/package.json` | Dependencies and scripts |
| `frontend/vite.config.ts` | Vite + Tailwind + path aliases |
| `frontend/tsconfig.json` | TypeScript config with path aliases |
| `frontend/tsconfig.app.json` | App-specific TypeScript config |
| `frontend/src/index.css` | Tailwind CSS import + theme variables |
| `frontend/src/lib/utils.ts` | `cn()` utility (auto-generated by shadcn) |
| `frontend/components.json` | shadcn/ui configuration |
| `frontend/src/components/ui/` | All shadcn/ui component files |
| `frontend/.env.example` | Environment variable template |
| `frontend/.gitignore` | Node.js ignores |

### Success Criteria

- [ ] `pnpm create vite` completes successfully with react-ts template
- [ ] `pnpm install` installs all dependencies without errors
- [ ] `npx shadcn@latest init` creates components.json
- [ ] All 21 shadcn components install without errors
- [ ] `pnpm dev` starts dev server on http://localhost:5173
- [ ] `pnpm build` produces production bundle without TypeScript errors
- [ ] Path alias `@/` resolves correctly in imports
- [ ] Tailwind CSS classes apply correctly

---

## All Needed Context

### Documentation & References

```yaml
# Vite + React Setup
- url: https://vite.dev/guide/
  why: "Vite project scaffolding, environment variables (import.meta.env)"
  section: "Getting Started, Env Variables and Modes"

# Tailwind CSS 4 with Vite (CRITICAL)
- url: https://tailwindcss.com/docs
  why: "Tailwind CSS 4 installation with @tailwindcss/vite plugin"
  critical: "Use @import 'tailwindcss' instead of @tailwind directives"

# shadcn/ui Installation (CRITICAL)
- url: https://ui.shadcn.com/docs/installation/vite
  why: "Official Vite installation guide"
  critical: "Use 'npx shadcn@latest init' NOT 'npx shadcn-ui init'"

# shadcn/ui Components
- url: https://ui.shadcn.com/docs/components
  why: "Component reference for all 21 components to install"

# TypeScript Path Aliases
- url: https://vite.dev/guide/features.html#typescript
  why: "Path alias configuration with @/ mapping to src/"
```

### Current Codebase Tree

```
ForecastLabAI/
├── app/                    # FastAPI backend (existing)
├── docs/
├── examples/
├── PRPs/
├── INITIAL-11A.md          # This spec
├── INITIAL-11B.md          # Architecture (next phase)
├── INITIAL-11C.md          # Pages (next phase)
├── .gitignore              # Already has node_modules
└── docker-compose.yml
```

### Desired Codebase Tree (Files to Create)

```
frontend/                           # NEW: Entire directory
├── public/
│   └── vite.svg                    # Auto-generated by Vite
├── src/
│   ├── components/
│   │   └── ui/                     # shadcn/ui components (21 files)
│   │       ├── accordion.tsx
│   │       ├── alert-dialog.tsx
│   │       ├── badge.tsx
│   │       ├── button.tsx
│   │       ├── calendar.tsx
│   │       ├── card.tsx
│   │       ├── chart.tsx
│   │       ├── checkbox.tsx
│   │       ├── collapsible.tsx
│   │       ├── dialog.tsx
│   │       ├── dropdown-menu.tsx
│   │       ├── input.tsx
│   │       ├── navigation-menu.tsx
│   │       ├── pagination.tsx
│   │       ├── popover.tsx
│   │       ├── progress.tsx
│   │       ├── scroll-area.tsx
│   │       ├── select.tsx
│   │       ├── separator.tsx
│   │       ├── sheet.tsx
│   │       ├── skeleton.tsx
│   │       ├── sonner.tsx
│   │       ├── table.tsx
│   │       ├── tabs.tsx
│   │       ├── textarea.tsx
│   │       └── tooltip.tsx
│   ├── lib/
│   │   └── utils.ts                # cn() utility (shadcn auto-generates)
│   ├── App.tsx                     # Vite default (will be replaced in 11B/C)
│   ├── main.tsx                    # Entry point
│   └── index.css                   # Tailwind imports + chart theme
├── .env.example                    # Environment template
├── .gitignore                      # Node.js ignores
├── components.json                 # shadcn/ui config
├── eslint.config.js                # Vite default
├── index.html                      # Vite default
├── package.json                    # Dependencies
├── tsconfig.json                   # TypeScript config
├── tsconfig.app.json               # App TypeScript config
├── tsconfig.node.json              # Node TypeScript config
└── vite.config.ts                  # Vite + Tailwind + aliases
```

### Known Gotchas & Library Quirks

```typescript
// CRITICAL: Tailwind CSS 4 syntax change
// OLD (v3): @tailwind base; @tailwind components; @tailwind utilities;
// NEW (v4): @import "tailwindcss";
// The single import replaces all three directives

// CRITICAL: shadcn/ui init command
// CORRECT: npx shadcn@latest init
// WRONG: npx shadcn-ui init (deprecated package name)

// CRITICAL: Vite environment variables
// CORRECT: import.meta.env.VITE_API_BASE_URL
// WRONG: process.env.VITE_API_BASE_URL (that's Node.js)
// Variables MUST be prefixed with VITE_ to be exposed to client

// CRITICAL: TypeScript path aliases require BOTH configs
// Must add "paths" to BOTH tsconfig.json AND tsconfig.app.json
// Also need vite.config.ts resolve.alias for runtime

// CRITICAL: @types/node for path module
// vite.config.ts uses path.resolve() which requires @types/node
// Install: pnpm add -D @types/node

// CRITICAL: shadcn/ui chart component requires recharts
// When installing chart component, it auto-installs recharts
// BUT TanStack libraries need manual install: pnpm add @tanstack/react-query @tanstack/react-table

// CRITICAL: date-fns and lucide-react
// shadcn components use these as peer dependencies
// Calendar needs date-fns, icons need lucide-react
// Ensure: pnpm add date-fns lucide-react
```

---

## Implementation Blueprint

### Task Overview

| # | Task | Description | Validation |
|---|------|-------------|------------|
| 1 | Create Vite project | `pnpm create vite frontend --template react-ts` | Directory exists |
| 2 | Install Tailwind CSS 4 | `pnpm add tailwindcss @tailwindcss/vite` | vite.config.ts updated |
| 3 | Configure vite.config.ts | Add Tailwind plugin + path aliases | Build succeeds |
| 4 | Configure TypeScript | Add path aliases to both tsconfig files | Imports resolve |
| 5 | Update index.css | Replace content with Tailwind import + theme | Styles apply |
| 6 | Initialize shadcn/ui | `npx shadcn@latest init` | components.json created |
| 7 | Install shadcn components | Batch install all 21 components | All files in ui/ |
| 8 | Install additional deps | TanStack Query, TanStack Table, date-fns, lucide | package.json updated |
| 9 | Create .env.example | Environment variable template | File exists |
| 10 | Verify build | `pnpm build` | dist/ created |

---

### Task 1: Create Vite Project

```bash
# From project root (ForecastLabAI/)
cd /home/w7-shellsnake/w7-DEV_X1/w7-ForecastLabAI
pnpm create vite frontend --template react-ts
cd frontend
pnpm install
```

**Expected Output**: `frontend/` directory with React 19 + TypeScript template

---

### Task 2: Install Tailwind CSS 4

```bash
cd frontend
pnpm add tailwindcss @tailwindcss/vite
pnpm add -D @types/node
```

---

### Task 3: Configure vite.config.ts

Replace `frontend/vite.config.ts`:

```typescript
import path from "path"
import tailwindcss from "@tailwindcss/vite"
import react from "@vitejs/plugin-react"
import { defineConfig } from "vite"

export default defineConfig({
  plugins: [react(), tailwindcss()],
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
  server: {
    port: 5173,
    proxy: {
      // Proxy API requests to backend during development
      "/api": {
        target: "http://localhost:8123",
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, ""),
      },
    },
  },
})
```

---

### Task 4: Configure TypeScript Path Aliases

Update `frontend/tsconfig.json`:

```json
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ],
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

Update `frontend/tsconfig.app.json` (add to existing compilerOptions):

```json
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"]
}
```

---

### Task 5: Update index.css

Replace `frontend/src/index.css`:

```css
@import "tailwindcss";

/* shadcn/ui chart color variables */
@layer base {
  :root {
    --chart-1: 221.2 83.2% 53.3%;
    --chart-2: 142.1 76.2% 36.3%;
    --chart-3: 47.9 95.8% 53.1%;
    --chart-4: 24.6 95% 53.1%;
    --chart-5: 280.1 93.6% 53.1%;
  }

  .dark {
    --chart-1: 217.2 91.2% 59.8%;
    --chart-2: 142.1 70.6% 45.3%;
    --chart-3: 47.9 95.8% 53.1%;
    --chart-4: 24.6 95% 53.1%;
    --chart-5: 280.1 93.6% 53.1%;
  }
}
```

---

### Task 6: Initialize shadcn/ui

```bash
cd frontend
npx shadcn@latest init
```

**When prompted, select:**
- Style: **New York**
- Base color: **Neutral**
- CSS variables for theming: **Yes**

This creates `components.json` and updates `src/lib/utils.ts`.

---

### Task 7: Install shadcn Components

Install all required components in batches:

```bash
cd frontend

# Layout & Navigation (6 components)
npx shadcn@latest add card tabs navigation-menu sheet scroll-area separator

# Data Display (5 components)
npx shadcn@latest add table badge skeleton pagination progress

# Form Components (7 components)
npx shadcn@latest add button input select textarea calendar popover checkbox

# Feedback & Overlays (4 components)
npx shadcn@latest add sonner tooltip alert-dialog dialog

# Interactive (3 components)
npx shadcn@latest add collapsible accordion dropdown-menu

# Charts (1 component - installs recharts automatically)
npx shadcn@latest add chart
```

**Total: 26 component installations** (some have sub-components)

---

### Task 8: Install Additional Dependencies

```bash
cd frontend

# TanStack libraries for data tables and data fetching
pnpm add @tanstack/react-query @tanstack/react-table

# Date utilities (used by calendar, date pickers)
pnpm add date-fns

# Icons (used throughout UI)
pnpm add lucide-react

# React Router for navigation
pnpm add react-router-dom
```

---

### Task 9: Create Environment Configuration

Create `frontend/.env.example`:

```env
# API Configuration
VITE_API_BASE_URL=http://localhost:8123
VITE_WS_URL=ws://localhost:8123/agents/stream

# Feature Flags
VITE_ENABLE_AGENT_CHAT=true
VITE_ENABLE_ADMIN_PANEL=true

# Visualization
VITE_DEFAULT_PAGE_SIZE=25
VITE_MAX_CHART_POINTS=365
```

Create `frontend/.gitignore` (add to existing):

```gitignore
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# Dependencies
node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

# Environment
.env
.env.local
.env.*.local
```

---

### Task 10: Verify Setup

```bash
cd frontend

# Development build
pnpm dev
# Expected: Server starts on http://localhost:5173

# Production build
pnpm build
# Expected: dist/ directory created with no errors

# Type check
pnpm tsc --noEmit
# Expected: No TypeScript errors
```

---

## Validation Loop

### Level 1: Directory Structure Verification

```bash
cd frontend

# Verify shadcn components installed
ls src/components/ui/ | wc -l
# Expected: 20+ files (varies by shadcn version)

# Verify key files exist
test -f components.json && echo "✓ components.json"
test -f src/lib/utils.ts && echo "✓ utils.ts"
test -f vite.config.ts && echo "✓ vite.config.ts"
test -f .env.example && echo "✓ .env.example"
```

### Level 2: Build Validation

```bash
cd frontend

# Clean build
rm -rf node_modules dist
pnpm install
pnpm build

# Expected output:
# vite v6.x.x building for production...
# ✓ X modules transformed.
# dist/index.html
# dist/assets/*.js
# dist/assets/*.css
```

### Level 3: Development Server Test

```bash
cd frontend
pnpm dev

# In browser: Open http://localhost:5173
# Expected: Vite + React welcome page loads
# Check: No console errors in DevTools
# Check: Tailwind styles apply (if you add a class)
```

### Level 4: Import Path Test

Create a quick test by editing `frontend/src/App.tsx`:

```tsx
import { Button } from "@/components/ui/button"

function App() {
  return (
    <div className="flex min-h-screen items-center justify-center">
      <Button>shadcn/ui works!</Button>
    </div>
  )
}

export default App
```

Verify:
1. No import errors in IDE
2. Button renders with styles
3. No console errors

---

## Final Validation Checklist

- [ ] `frontend/` directory exists at project root
- [ ] `pnpm dev` starts without errors
- [ ] `pnpm build` completes without TypeScript errors
- [ ] `components.json` exists with New York style
- [ ] `src/components/ui/` contains 20+ component files
- [ ] `src/lib/utils.ts` contains `cn()` function
- [ ] `vite.config.ts` has Tailwind plugin and path aliases
- [ ] `tsconfig.json` and `tsconfig.app.json` have `@/*` path alias
- [ ] `src/index.css` has `@import "tailwindcss"` and chart variables
- [ ] `.env.example` contains all required variables
- [ ] TanStack Query, TanStack Table, date-fns, lucide-react installed
- [ ] React Router installed

---

## Integration Points

```yaml
BACKEND_CONNECTION:
  - Frontend connects to: http://localhost:8123 (VITE_API_BASE_URL)
  - WebSocket connects to: ws://localhost:8123/agents/stream (VITE_WS_URL)
  - Vite proxy configured for /api/* -> localhost:8123

NEXT_PHASES:
  - PRP-11B: Architecture - App shell, routing, layout components
  - PRP-11C: Pages - Dashboard, Explorer, Visualize, Chat, Admin pages

GIT:
  - frontend/ is a NEW directory (not modifying existing files)
  - .gitignore already has node_modules entry
```

---

## Anti-Patterns to Avoid

- ❌ Don't use `npx shadcn-ui init` (deprecated package name)
- ❌ Don't use `@tailwind base;` syntax (v3) — use `@import "tailwindcss"` (v4)
- ❌ Don't use `process.env.VITE_*` — use `import.meta.env.VITE_*`
- ❌ Don't forget `@types/node` — needed for `path.resolve()` in vite.config.ts
- ❌ Don't add path aliases to only one tsconfig — need both `.json` and `.app.json`
- ❌ Don't run commands from project root without `cd frontend`
- ❌ Don't skip chart theme variables — needed for shadcn/ui chart component

---

## Confidence Score Breakdown

| Area | Score | Rationale |
|------|-------|-----------|
| Vite Scaffolding | 10/10 | `pnpm create vite` is battle-tested |
| Tailwind CSS 4 | 9/10 | New v4 syntax, well documented |
| shadcn/ui Init | 10/10 | CLI handles all complexity |
| Component Installation | 9/10 | Batch install is straightforward |
| TypeScript Config | 9/10 | Path aliases well documented |
| Environment Config | 10/10 | Simple file creation |
| **Overall** | **9.5/10** | Setup-only task with clear steps |

---

## Notes for Implementing Agent

1. **Execute commands sequentially** — each task depends on previous
2. **Run from project root** then `cd frontend` for npm commands
3. **Accept all shadcn defaults** or select New York style when prompted
4. **Verify each step** before proceeding to next
5. **No application code needed** — just scaffolding and config
6. **Test the build** as final validation
